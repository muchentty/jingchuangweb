(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"11bc":function(n,e,i){"use strict";i.r(e);var t=i("d749"),a=i.n(t);for(var o in t)"default"!==o&&function(n){i.d(e,n,(function(){return t[n]}))}(o);e["default"]=a.a},2943:function(n,e,i){"use strict";i.r(e);var t=i("fdcb"),a=i("11bc");for(var o in a)"default"!==o&&function(n){i.d(e,n,(function(){return a[n]}))}(o);i("adbc");var s,u=i("f0c5"),r=Object(u["a"])(a["default"],t["b"],t["c"],!1,null,"5642fadc",null,!1,t["a"],s);e["default"]=r.exports},"757a":function(n,e,i){var t=i("a729");"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var a=i("4f06").default;a("54a79435",t,!0,{sourceMap:!1,shadowMode:!1})},a729:function(n,e,i){var t=i("24fb");e=t(!1),e.push([n.i,".weloce[data-v-5642fadc]{font-size:%?42?%;font-family:Adobe Heiti Std;font-weight:400;color:#0e0f18;padding-top:%?181?%;padding-left:%?61?%}.user[data-v-5642fadc]{width:%?667?%;height:%?445?%;background:#fff;box-shadow:0 %?14?% %?120?% 0 hsla(0,0%,71.4%,.42);border-radius:%?36?%;margin-left:%?40?%;margin-top:%?136?%}.name[data-v-5642fadc]{font-size:%?25?%;font-family:Adobe Heiti Std;font-weight:400;color:#333;padding:%?45?% %?38?% %?0?% %?38?%}.input[data-v-5642fadc]{font-size:%?32?%;margin-top:%?30?%;padding-bottom:%?30?%;border-bottom:solid %?1?% #d4d4d4}.btn[data-v-5642fadc]{width:%?591?%;height:%?84?%;background:#ff4e5a;box-shadow:0 %?25?% %?54?% 0 rgba(255,113,123,.4);border-radius:%?42?%;font-size:%?33?%;font-family:Adobe Heiti Std;font-weight:400;color:#fff;line-height:%?84?%;text-align:center;margin-top:%?96?%}.no[data-v-5642fadc]{margin-top:%?20?%;text-align:center;font-size:%?24?%;font-family:Adobe Heiti Std;font-weight:400;color:#cacaca}.go[data-v-5642fadc]{color:#ff4e5a}",""]),n.exports=e},adbc:function(n,e,i){"use strict";var t=i("757a"),a=i.n(t);a.a},d749:function(n,e,i){"use strict";i("c975"),i("ac1f"),i("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{huanyingdengluzhihuishuziwenlvtong:"",qingshuruyonghuming:"",qingshurumima:"",huanmeizhuce:"",dengluchenggong:"",yonghuming:"",quzhuce:"",mima:"",denglu:"",weixin:"",username:"",passWord:"",is_wx:"0"}},onLoad:function(n){var e=this;this.huanyingdengluzhihuishuziwenlvtong=this.$lang.huanyingdengluzhihuishuziwenlvtong[uni.getStorageSync("lang")],this.qingshuruyonghuming=this.$lang.qingshuruyonghuming[uni.getStorageSync("lang")],this.qingshurumima=this.$lang.qingshurumima[uni.getStorageSync("lang")],this.huanmeizhuce=this.$lang.huanmeizhuce[uni.getStorageSync("lang")],this.dengluchenggong=this.$lang.dengluchenggong[uni.getStorageSync("lang")],this.yonghuming=this.$lang.yonghuming[uni.getStorageSync("lang")],this.quzhuce=this.$lang.quzhuce[uni.getStorageSync("lang")],this.mima=this.$lang.mima[uni.getStorageSync("lang")],this.denglu=this.$lang.denglu[uni.getStorageSync("lang")],this.weixin=this.$lang.weixin[uni.getStorageSync("lang")];var i=this,t=window.navigator.userAgent.toLowerCase();"micromessenger"!=t.match(/MicroMessenger/i)&&-1==window.location.host.indexOf("localhost")&&(this.is_wx=1),n.code&&(console.log(n.code),this.$request("/api/auth/wxUserInfo",{code:n.code},"post").then((function(n){e.$request("/api/auth/wxLogin",{wxid:1,code:"the code is from h5",rawData:n.data},"post").then((function(n){if(console.log(n),1==n.code){var e=n.data.token,t=n.data.refresh_token,a=n.data.expire_in+n.time;uni.showToast({title:i.dengluchenggong,icon:"none"}),uni.setStorageSync("wtoken",e),uni.setStorageSync("retoken",t),uni.setStorageSync("expire",a);var o=getCurrentPages(),s=o[o.length-2];console.log(s),"undefined"==s||void 0==s||""==s||null==s?uni.switchTab({url:"../index/index"}):uni.navigateBack({})}else uni.showToast({title:n.msg,icon:"none"})}))})))},methods:{getUserInfo:function(){var n=encodeURIComponent("https://wap.xiyi-iot.com/wx.php");window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe291ac50970adcb3&redirect_uri="+n+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"},reg:function(){uni.navigateTo({url:"../register/register"})},userName:function(n){this.username=n.detail.value},password:function(n){this.passWord=n.detail.value},login:function(){var n=this;this.$request("/api/auth/login",{username:n.username,password:n.passWord},"post").then((function(e){if(1==e.code){var i=e.data.token,t=e.data.refresh_token,a=e.data.expire_in+e.time;uni.showToast({title:n.dengluchenggong,icon:"none"}),uni.setStorageSync("wtoken",i),uni.setStorageSync("retoken",t),uni.setStorageSync("expire",a);var o=getCurrentPages(),s=o[o.length-2];console.log(s),"undefined"==s||void 0==s||""==s||null==s?uni.switchTab({url:"../index/index"}):uni.navigateBack({})}else uni.showToast({title:e.msg,icon:"none"})}))}}};e.default=t},fdcb:function(n,e,i){"use strict";var t;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return t}));var a=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("v-uni-view",{staticClass:"login"},[i("v-uni-view",{staticClass:"weloce"},[n._v(n._s(n.huanyingdengluzhihuishuziwenlvtong))]),i("v-uni-view",{staticClass:"user"},[i("v-uni-view",{staticClass:"name"},[i("v-uni-view",[n._v(n._s(n.yonghuming))]),i("v-uni-view",{staticClass:"input"},[i("v-uni-input",{attrs:{type:"text",placeholder:n.qingshuruyonghuming},on:{input:function(e){arguments[0]=e=n.$handleEvent(e),n.userName.apply(void 0,arguments)}},model:{value:n.username,callback:function(e){n.username=e},expression:"username"}})],1)],1),i("v-uni-view",{staticClass:"name"},[i("v-uni-view",[n._v(n._s(n.mima))]),i("v-uni-view",{staticClass:"input"},[i("v-uni-input",{attrs:{type:"password",placeholder:n.qingshurumima},on:{input:function(e){arguments[0]=e=n.$handleEvent(e),n.password.apply(void 0,arguments)}},model:{value:n.passWord,callback:function(e){n.passWord=e},expression:"passWord"}})],1)],1)],1),i("v-uni-view",[i("v-uni-button",{staticClass:"btn",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.login.apply(void 0,arguments)}}},[n._v(n._s(n.denglu))]),i("v-uni-view",{staticClass:"no"},[n._v(n._s(n.huanmeizhuce)+"ï¼Œ"),i("v-uni-text",{staticClass:"go",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.reg.apply(void 0,arguments)}}},[n._v(n._s(n.quzhuce))])],1),n.is_wx?i("v-uni-view",{staticClass:"no"},[n._v(n._s(n.weixin)),i("v-uni-text",{staticClass:"go",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.getUserInfo.apply(void 0,arguments)}}},[n._v(n._s(n.denglu))])],1):n._e()],1)],1)},o=[]}}]);