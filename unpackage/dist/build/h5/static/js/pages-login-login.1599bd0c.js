(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{3071:function(n,e,t){"use strict";t("c975"),t("ac1f"),t("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{huanyingdengluzhihuishuziwenlvtong:"",qingshuruyonghuming:"",qingshurumima:"",huanmeizhuce:"",dengluchenggong:"",yonghuming:"",quzhuce:"",mima:"",denglu:"",weixin:"",username:"",passWord:"",is_wx:"0"}},onLoad:function(n){var e=this;this.huanyingdengluzhihuishuziwenlvtong=this.$lang.huanyingdengluzhihuishuziwenlvtong[uni.getStorageSync("lang")],this.qingshuruyonghuming=this.$lang.qingshuruyonghuming[uni.getStorageSync("lang")],this.qingshurumima=this.$lang.qingshurumima[uni.getStorageSync("lang")],this.huanmeizhuce=this.$lang.huanmeizhuce[uni.getStorageSync("lang")],this.dengluchenggong=this.$lang.dengluchenggong[uni.getStorageSync("lang")],this.yonghuming=this.$lang.yonghuming[uni.getStorageSync("lang")],this.quzhuce=this.$lang.quzhuce[uni.getStorageSync("lang")],this.mima=this.$lang.mima[uni.getStorageSync("lang")],this.denglu=this.$lang.denglu[uni.getStorageSync("lang")],this.weixin=this.$lang.weixin[uni.getStorageSync("lang")];var t=this,i=window.navigator.userAgent.toLowerCase();"micromessenger"!=i.match(/MicroMessenger/i)&&-1==window.location.host.indexOf("localhost")&&(this.is_wx=1),n.code&&(console.log(n.code),this.$request("/api/auth/wxUserInfo",{code:n.code},"post").then((function(n){e.$request("/api/auth/wxLogin",{wxid:1,code:"the code is from h5",rawData:n.data},"post").then((function(n){if(console.log(n),1==n.code){var e=n.data.token,i=n.data.refresh_token,a=n.data.expire_in+n.time;uni.showToast({title:t.dengluchenggong,icon:"none"}),uni.setStorageSync("wtoken",e),uni.setStorageSync("retoken",i),uni.setStorageSync("expire",a);var o=getCurrentPages(),s=o[o.length-2];console.log(s),"undefined"==s||void 0==s||""==s||null==s?uni.switchTab({url:"../index/index"}):uni.navigateBack({})}else uni.showToast({title:n.msg,icon:"none"})}))})))},methods:{getUserInfo:function(){var n=encodeURIComponent("https://api.jcwenlvyun.com/wx.php");console.log(n),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe291ac50970adcb3&redirect_uri="+n+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"},reg:function(){uni.navigateTo({url:"../register/register"})},userName:function(n){this.username=n.detail.value},password:function(n){this.passWord=n.detail.value},login:function(){var n=this;this.$request("/api/auth/login",{username:n.username,password:n.passWord},"post").then((function(e){if(1==e.code){var t=e.data.token,i=e.data.refresh_token,a=e.data.expire_in+e.time;uni.showToast({title:n.dengluchenggong,icon:"none"}),uni.setStorageSync("wtoken",t),uni.setStorageSync("retoken",i),uni.setStorageSync("expire",a);var o=getCurrentPages(),s=o[o.length-2];console.log(s),"undefined"==s||void 0==s||""==s||null==s?uni.switchTab({url:"../index/index"}):uni.navigateBack({})}else uni.showToast({title:e.msg,icon:"none"})}))}}};e.default=i},"3eb5":function(n,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return i}));var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",{staticClass:"login"},[t("v-uni-view",{staticClass:"weloce"},[n._v(n._s(n.huanyingdengluzhihuishuziwenlvtong))]),t("v-uni-view",{staticClass:"user"},[t("v-uni-view",{staticClass:"name"},[t("v-uni-view",[n._v(n._s(n.yonghuming))]),t("v-uni-view",{staticClass:"input"},[t("v-uni-input",{attrs:{type:"text",placeholder:n.qingshuruyonghuming},on:{input:function(e){arguments[0]=e=n.$handleEvent(e),n.userName.apply(void 0,arguments)}},model:{value:n.username,callback:function(e){n.username=e},expression:"username"}})],1)],1),t("v-uni-view",{staticClass:"name"},[t("v-uni-view",[n._v(n._s(n.mima))]),t("v-uni-view",{staticClass:"input"},[t("v-uni-input",{attrs:{type:"password",placeholder:n.qingshurumima},on:{input:function(e){arguments[0]=e=n.$handleEvent(e),n.password.apply(void 0,arguments)}},model:{value:n.passWord,callback:function(e){n.passWord=e},expression:"passWord"}})],1)],1)],1),t("v-uni-view",[t("v-uni-button",{staticClass:"btn",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.login.apply(void 0,arguments)}}},[n._v(n._s(n.denglu))]),t("v-uni-view",{staticClass:"no"},[n._v(n._s(n.huanmeizhuce)+"ï¼Œ"),t("v-uni-text",{staticClass:"go",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.reg.apply(void 0,arguments)}}},[n._v(n._s(n.quzhuce))])],1),n.is_wx?t("v-uni-view",{staticClass:"no"},[n._v(n._s(n.weixin)),t("v-uni-text",{staticClass:"go",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.getUserInfo.apply(void 0,arguments)}}},[n._v(n._s(n.denglu))])],1):n._e()],1)],1)},o=[]},"4b9e":function(n,e,t){var i=t("8824");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=t("4f06").default;a("dcd5faba",i,!0,{sourceMap:!1,shadowMode:!1})},6310:function(n,e,t){"use strict";var i=t("4b9e"),a=t.n(i);a.a},8824:function(n,e,t){var i=t("24fb");e=i(!1),e.push([n.i,".weloce[data-v-6e8cf2a3]{font-size:%?42?%;font-family:Adobe Heiti Std;font-weight:400;color:#0e0f18;padding-top:%?181?%;padding-left:%?61?%}.user[data-v-6e8cf2a3]{width:%?667?%;height:%?445?%;background:#fff;box-shadow:0 %?14?% %?120?% 0 hsla(0,0%,71.4%,.42);border-radius:%?36?%;margin-left:%?40?%;margin-top:%?136?%}.name[data-v-6e8cf2a3]{font-size:%?25?%;font-family:Adobe Heiti Std;font-weight:400;color:#333;padding:%?45?% %?38?% %?0?% %?38?%}.input[data-v-6e8cf2a3]{font-size:%?32?%;margin-top:%?30?%;padding-bottom:%?30?%;border-bottom:solid %?1?% #d4d4d4}.btn[data-v-6e8cf2a3]{width:%?591?%;height:%?84?%;background:#ff4e5a;box-shadow:0 %?25?% %?54?% 0 rgba(255,113,123,.4);border-radius:%?42?%;font-size:%?33?%;font-family:Adobe Heiti Std;font-weight:400;color:#fff;line-height:%?84?%;text-align:center;margin-top:%?96?%}.no[data-v-6e8cf2a3]{margin-top:%?20?%;text-align:center;font-size:%?24?%;font-family:Adobe Heiti Std;font-weight:400;color:#cacaca}.go[data-v-6e8cf2a3]{color:#ff4e5a}",""]),n.exports=e},"9a41":function(n,e,t){"use strict";t.r(e);var i=t("3eb5"),a=t("ab0b");for(var o in a)"default"!==o&&function(n){t.d(e,n,(function(){return a[n]}))}(o);t("6310");var s,u=t("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"6e8cf2a3",null,!1,i["a"],s);e["default"]=r.exports},ab0b:function(n,e,t){"use strict";t.r(e);var i=t("3071"),a=t.n(i);for(var o in i)"default"!==o&&function(n){t.d(e,n,(function(){return i[n]}))}(o);e["default"]=a.a}}]);